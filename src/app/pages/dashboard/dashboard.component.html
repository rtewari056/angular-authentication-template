<app-navbar></app-navbar>

<!-- component -->
<section class="container px-4 mx-auto">
    <div class="mt-6 md:flex md:items-center md:justify-end">

        <form novalidate class="relative flex items-center mt-4 md:mt-0" [formGroup]="formService.dashboardSearchForm">
            <mat-form-field
                class="block w-full py-1.5 pr-5 text-gray-700 bg-white border border-gray-200 rounded-lg md:w-80 placeholder-gray-400/70 pl-11 rtl:pr-11 rtl:pl-5 dark:text-gray-300 dark:border-gray-600 focus:border-blue-400 dark:focus:border-blue-300 focus:ring-blue-300 focus:outline-none focus:ring focus:ring-opacity-40"
                appearance="outline">
                <mat-label>Search</mat-label>
                <input matInput type="text" formControlName="searchTerm">
                <mat-icon matPrefix>search</mat-icon>
                @if (showClearButton()) {
                <button matSuffix mat-icon-button aria-label="Clear" (click)="clearSearch()">
                    <mat-icon>close</mat-icon>
                </button>
                }
            </mat-form-field>
        </form>

    </div>

    <div class="flex flex-col mt-6">
        <div class="-mx-4 -my-2 overflow-x-auto sm:-mx-6 lg:-mx-8">
            <div class="inline-block min-w-full py-2 align-middle md:px-6 lg:px-8">
                @if (!isLoading()) {
                    <div class="mat-elevation-z8 overflow-hidden border border-gray-200 dark:border-gray-700 md:rounded-lg">
                        <table mat-table [dataSource]="dataSource" matSort>

                            <!-- Employee ID Column -->
                            <ng-container matColumnDef="employeeId">
                                <th mat-header-cell *matHeaderCellDef mat-sort-header> Employee ID </th>
                                <td mat-cell *matCellDef="let row"> {{row.employeeId}} </td>
                            </ng-container>

                            <!-- Employee Name Column -->
                            <ng-container matColumnDef="employeeName">
                                <th mat-header-cell *matHeaderCellDef mat-sort-header> Employee Name </th>
                                <td mat-cell *matCellDef="let row"> {{row.employeeName}} </td>
                            </ng-container>

                            <!-- Name Column -->
                            <ng-container matColumnDef="date">
                                <th mat-header-cell *matHeaderCellDef> Date </th>
                                <td mat-cell *matCellDef="let row"> {{row.date}} </td>
                            </ng-container>

                            <!-- Award Category Column -->
                            <ng-container matColumnDef="awardCategory">
                                <th mat-header-cell *matHeaderCellDef mat-sort-header> Award Category </th>
                                <td mat-cell *matCellDef="let row"> {{row.awardCategory}} </td>
                            </ng-container>

                            <!-- Action Column -->
                            <ng-container matColumnDef="action">
                                <th mat-header-cell *matHeaderCellDef> Action </th>
                                <td mat-cell *matCellDef="let row">
                                    <div class="flex gap-2">
                                        <button mat-mini-fab matTooltip="View" color="primary" aria-label="View submissions" (click)="viewSubmission(row)">
                                            <mat-icon>remove_red_eye</mat-icon>
                                        </button>
                                    </div>
                                </td>
                            </ng-container>

                            <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
                            <tr mat-row *matRowDef="let row; columns: displayedColumns;"></tr>

                            <!-- Row shown when there is no matching data. -->
                            <!-- <tr class="mat-row" *matNoDataRow>
                                <td class="mat-cell" colspan="4">No data matching the filter "{{input.value}}"</td>
                                </tr> -->
                        </table>

                        <mat-paginator showFirstLastButtons length="1" pageSize="5" [pageSizeOptions]="[5, 10, 25, 100]"
                            aria-label="Select page of users"></mat-paginator>
                    </div>
                } @else {
                    <div class="flex justify-center">
                        <mat-spinner></mat-spinner>
                    </div>
                }
            </div>
        </div>
    </div>
</section>